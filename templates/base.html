<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Expense Predictor | Healthcare Analytics</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --secondary: #3f37c9;
            --accent: #f72585;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --border-radius: 16px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --box-shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 40px;
            max-width: 1400px;
            width: 100%;
            align-items: start;
        }

        /* Header & Info Panel */
        .info-panel {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: var(--box-shadow);
            height: fit-content;
            border-top: 6px solid var(--primary);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .logo-text h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            line-height: 1.2;
        }

        .logo-text span {
            color: var(--primary);
        }

        .info-content h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .info-content p {
            color: var(--gray);
            margin-bottom: 25px;
            font-size: 1rem;
        }

        .features {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .feature i {
            background: var(--light-gray);
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .feature span {
            font-weight: 500;
            color: var(--dark);
        }

        .disclaimer {
            background: #f0f7ff;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            margin-top: 30px;
        }

        .disclaimer h4 {
            font-family: 'Poppins', sans-serif;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 1rem;
        }

        .disclaimer p {
            font-size: 0.85rem;
            color: var(--gray);
            margin-bottom: 0;
        }

        /* Form Panel */
        .form-panel {
            background: white;
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: var(--box-shadow);
            border-top: 6px solid var(--accent);
        }

        .form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 35px;
        }

        .form-header h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            color: var(--dark);
        }

        .form-steps {
            display: flex;
            gap: 8px;
        }

        .step {
            width: 30px;
            height: 6px;
            background: var(--light-gray);
            border-radius: 3px;
            transition: var(--transition);
        }

        .step.active {
            background: var(--primary);
            width: 40px;
        }

        .form-container {
            display: flex;
            flex-direction: column;
            gap: 28px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 28px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group label i {
            color: var(--primary);
            font-size: 0.9rem;
        }

        .form-control {
            padding: 16px 20px;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
        }

        .form-control::placeholder {
            color: #adb5bd;
        }

        .radio-group {
            display: flex;
            gap: 25px;
            margin-top: 5px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            display: none;
        }

        .radio-custom {
            width: 22px;
            height: 22px;
            border: 2px solid var(--light-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .radio-custom::after {
            content: '';
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: white;
            transition: var(--transition);
        }

        .radio-option input[type="radio"]:checked + .radio-custom {
            border-color: var(--primary);
            background: var(--primary);
        }

        .radio-option input[type="radio"]:checked + .radio-custom::after {
            background: white;
        }

        .radio-option span {
            color: var(--dark);
            font-weight: 500;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        /* Prediction Result */
        .prediction-result {
            background: linear-gradient(135deg, #f0f7ff, #e3f2fd);
            border-radius: 16px;
            padding: 30px;
            margin-top: 20px;
            display: none;
            animation: fadeIn 0.6s ease-out;
            border: 2px solid #c5d8ff;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .result-header h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.4rem;
            color: var(--dark);
        }

        .result-value {
            text-align: center;
            margin: 25px 0;
        }

        .predicted-amount {
            font-family: 'Poppins', sans-serif;
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 10px;
        }

        .result-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .detail-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .detail-card i {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .detail-card h4 {
            font-size: 0.9rem;
            color: var(--gray);
            margin-bottom: 5px;
        }

        .detail-card p {
            font-weight: 600;
            color: var(--dark);
            font-size: 1.1rem;
        }

        /* Currency Symbol */
        .currency-symbol {
            font-size: 2.5rem;
            font-weight: 600;
            color: var(--primary);
            margin-right: 5px;
            vertical-align: baseline;
        }

        /* Buttons */
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid var(--light-gray);
        }

        .btn {
            padding: 16px 32px;
            border-radius: 12px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-cancel {
            background: white;
            color: var(--gray);
            border: 2px solid var(--light-gray);
        }

        .btn-cancel:hover {
            background: var(--light-gray);
            color: var(--dark);
        }

        .btn-submit {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.3);
        }

        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
        }

        .btn-reset {
            background: var(--light-gray);
            color: var(--dark);
        }

        .btn-reset:hover {
            background: #dee2e6;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .container {
                grid-template-columns: 1fr;
                max-width: 800px;
            }
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .result-details {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-actions .btn {
                width: 100%;
                justify-content: center;
            }
            
            .container, .info-panel, .form-panel {
                padding: 25px;
            }
            
            .predicted-amount {
                font-size: 2.8rem;
            }
            
            .currency-symbol {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Information Panel -->
        <div class="info-panel">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-stethoscope"></i>
                </div>
                <div class="logo-text">
                    <h1>Medical Expense <span>Predictor</span></h1>
                    <p>Advanced Healthcare Analytics</p>
                </div>
            </div>
            
            <div class="info-content">
                <h2>Predict Your Medical Expenses</h2>
                <p>Our AI-powered tool helps estimate your potential medical costs in Indian Rupees (â‚¹) based on demographic and health factors. Get an accurate prediction to better plan your healthcare budget.</p>
                
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-brain"></i>
                        <span>Machine Learning Algorithm</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-shield-alt"></i>
                        <span>Secure & Private Data Processing</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-chart-line"></i>
                        <span>Accurate Predictive Analytics</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-clock"></i>
                        <span>Instant Results</span>
                    </div>
                </div>
                
                <div class="disclaimer">
                    <h4><i class="fas fa-info-circle"></i> Important Notice</h4>
                    <p>This tool provides estimates based on statistical models and should not replace professional medical or financial advice. Actual expenses may vary based on individual circumstances and healthcare provider rates in India.</p>
                </div>
            </div>
        </div>
        
        <!-- Form Panel -->
        <div class="form-panel">
            <div class="form-header">
                <h2>Enter Patient Details</h2>
                <div class="form-steps">
                    <div class="step active"></div>
                    <div class="step"></div>
                    <div class="step"></div>
                </div>
            </div>
            
            <form id="predictionForm" class="form-container" method="POST" action="{% url 'predict' %}">
                {% csrf_token %}
                <div class="form-row">
                    <div class="form-group">
                        <label for="age"><i class="fas fa-birthday-cake"></i> Age</label>
                        <input type="number" id="age" name="age" class="form-control" placeholder="Enter age" min="0" max="120" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="bmi"><i class="fas fa-weight"></i> BMI</label>
                        <input type="number" id="bmi" name="bmi" class="form-control" placeholder="Body Mass Index" min="10" max="60" step="0.1" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="children"><i class="fas fa-child"></i> Children/Dependents</label>
                        <input type="number" id="children" name="children" class="form-control" placeholder="Number of children" min="0" max="10" required>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-smoking"></i> Smoking Status</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="smoker" value="yes" required>
                                <div class="radio-custom"></div>
                                <span>Smoker</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="smoker" value="no" checked>
                                <div class="radio-custom"></div>
                                <span>Non-Smoker</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="region"><i class="fas fa-globe-americas"></i> Region</label>
                        <select id="region" name="region" class="form-control" required>
                            <option value="" disabled selected>Select your region</option>
                            <option value="northwest">Northwest</option>
                            <option value="northeast">Northeast</option>
                            <option value="southwest">Southwest</option>
                            <option value="southeast">Southeast</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-venus-mars"></i> Gender</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="gender" value="male" required>
                                <div class="radio-custom"></div>
                                <span>Male</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gender" value="female" checked>
                                <div class="radio-custom"></div>
                                <span>Female</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Prediction Result (Initially Hidden) -->
                <div id="predictionResult" class="prediction-result" style="{% if not predicted_charges %}display: none;{% endif %}">
                    <div class="result-header">
                        <h3><i class="fas fa-chart-bar"></i> Predicted Medical Expenses</h3>
                        <div class="result-accuracy">
                            <span class="accuracy-badge">94% Accuracy</span>
                        </div>
                    </div>
                    
                    <div class="result-value">
                        <div class="predicted-amount">
                            <span class="currency-symbol">$</span>{% if predicted_charges %}{{ predicted_charges|floatformat:2 }}{% else %}0{% endif %}
                        </div>
                        <p style="color: var(--gray);">Estimated annual medical costs</p>
                    </div>
                    
                    <div class="result-details">
                        <div class="detail-card">
                            <i class="fas fa-procedures"></i>
                            <h4>Risk Level</h4>
                            <p>Medium</p>
                        </div>
                        <div class="detail-card">
                            <i class="fas fa-calendar-alt"></i>
                            <h4>Monthly Estimate</h4>
                            <p><span class="currency-symbol" style="font-size: 1rem;">$</span>{% if predicted_charges %}{{ predicted_charges|floatformat:2 }}{% else %}0{% endif %}</p>
                        </div>
                        <div class="detail-card">
                            <i class="fas fa-heartbeat"></i>
                            <h4>Health Score</h4>
                            <p>72/100</p>
                        </div>
                    </div>
                </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <div>
                        <button type="button" class="btn btn-reset" id="resetBtn">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                        <button type="submit" class="btn btn-submit">
                            <i class="fas fa-calculator"></i> Calculate Prediction
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Form submission - let Django handle it
        document.getElementById('predictionForm').addEventListener('submit', function(e) {
            // Basic validation
            const age = document.getElementById('age').value;
            const bmi = document.getElementById('bmi').value;
            const children = document.getElementById('children').value;
            const region = document.getElementById('region').value;
            
            if (!age || !bmi || !children || !region) {
                e.preventDefault();
                alert('Please fill in all required fields');
                return false;
            }
            // Form will submit to Django backend
        });
        
        // Reset form functionality
        document.getElementById('resetBtn').addEventListener('click', function() {
            window.location.href = "{% url 'predict' %}";
        });
        
        // Cancel button functionality
        document.querySelector('.btn-cancel').addEventListener('click', function() {
            if (confirm('Are you sure you want to cancel? All entered data will be lost.')) {
                window.location.href = "{% url 'predict' %}";
            }
        });
        
        // Add some interactivity to form inputs
        const formInputs = document.querySelectorAll('.form-control');
        formInputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'translateY(-2px)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'translateY(0)';
            });
        });
        
        // Show prediction result if it exists
        {% if predicted_charges %}
        document.addEventListener('DOMContentLoaded', function() {
            const resultDiv = document.getElementById('predictionResult');
            if (resultDiv) {
                resultDiv.style.display = 'block';
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });
        {% endif %}
    </script>
</body>
</html>